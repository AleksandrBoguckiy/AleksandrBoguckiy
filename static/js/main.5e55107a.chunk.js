(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{105:function(t,e,n){"use strict";n.r(e);var c,i,a=n(0),o=n.n(a),s=n(9),r=n.n(s),l=(n(80),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,149)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),i(t),a(t),o(t)}))}),u=n(33),d=n.n(u),j=n(141),O=n(142),b=n(136),f=n(144),T=n(139),h=n(145),m=n(143),k=n(10),p=n(41),L=n(62),D=n.n(L).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"e48f586f-eae5-4a76-8ed1-bdd525d79043"}}),I=function(){return D.get("todo-lists")},v=function(t){return D.post("todo-lists",{title:t})},g=function(t){return D.delete("todo-lists/".concat(t))},x=function(t,e){return D.put("todo-lists/".concat(t),{title:e})},S=function(t){return D.get("todo-lists/".concat(t,"/tasks"))},C=function(t,e){return D.post("todo-lists/".concat(t,"/tasks"),{title:e})},y=function(t,e){return D.delete("todo-lists/".concat(t,"/tasks/").concat(e))},E=function(t,e,n){return D.put("todo-lists/".concat(t,"/tasks/").concat(e),n)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(i||(i={}));var A=[],w=n(21),z=n(22),K={},F=function(t,e,n){return function(c,i){var a=i().tasks[t].find((function(t){return t.id===e}));if(a){var o=Object(k.a)({title:a.title,startDate:a.startDate,priority:a.priority,deadline:a.deadline,description:a.description,status:a.status},n);E(t,e,o).then((function(){c(function(t,e,n){return{type:"UPDATE-TASK",taskId:t,model:e,todoListID:n}}(e,n,t))}))}else console.log("tasks not found in the state")}},N=n(140),P=n(106),R=n(28),H=n(146),M=n(137),V=n(5),U=o.a.memo((function(t){var e=Object(a.useState)(""),n=Object(R.a)(e,2),c=n[0],i=n[1],o=Object(a.useState)(null),s=Object(R.a)(o,2),r=s[0],l=s[1],u=function(){""!==c.trim()?(t.addItem(c.trim()),i("")):l("Title is required")};return Object(V.jsxs)("div",{children:[Object(V.jsx)(H.a,{value:c,onChange:function(t){i(t.currentTarget.value)},onKeyPress:function(t){null!==r&&l(null),"Enter"===t.key&&u()},variant:"outlined",size:"small",error:!!r,helperText:r&&"Title is required",label:"Title"}),Object(V.jsx)(b.a,{size:"small",color:"primary",onClick:u,children:Object(V.jsx)(M.a,{fontSize:"large"})})]})})),G=o.a.memo((function(t){var e=t.titleTdl,n=t.changeTitle,c=Object(a.useState)(!1),i=Object(R.a)(c,2),o=i[0],s=i[1],r=Object(a.useState)(e),l=Object(R.a)(r,2),u=l[0],d=l[1],j=function(){u?n(u):d(e),s(!1)};return o?Object(V.jsx)(H.a,{value:u,onChange:function(t){d(t.currentTarget.value)},onBlur:j,onKeyPress:function(t){"Enter"===t.key&&j()},autoFocus:!0}):Object(V.jsx)("span",{onDoubleClick:function(){return s(!0)},children:e})})),B=n(138),_=n(147),q=o.a.memo((function(t){var e=t.removeTask,n=t.changeTaskTitle,i=t.changeTaskStatus,o=t.todoListID,s=t.task,r=Object(a.useCallback)((function(t){n(s.id,t,o)}),[n,s.id,o]);return Object(V.jsxs)("li",{children:[Object(V.jsx)(b.a,{size:"small",color:"secondary",onClick:function(){return e(s.id,o)},children:Object(V.jsx)(B.a,{fontSize:"small"})}),Object(V.jsx)(_.a,{checked:t.task.status===c.Completed,onChange:function(t){i(s.id,t.currentTarget.checked?c.Completed:c.New,o)},size:"small",color:"primary"}),Object(V.jsx)("span",{className:s.status===c.Completed?d.a.isDone:"",children:Object(V.jsx)(G,{titleTdl:s.title,changeTitle:r})})]},s.id)})),J=o.a.memo((function(t){var e=t.titleTdl,n=t.tasks,i=t.changeTodoListFilter,o=t.addTask,s=t.changeTodoListTitle,r=t.removeTask,l=t.changeTaskTitle,u=t.changeTaskStatus,d=t.removeTodoList,j=t.filter,O=t.todoListID,f=Object(w.b)();Object(a.useEffect)((function(){f(function(t){return function(e){S(t).then((function(n){e(function(t,e){return{type:"SET-TASKS",tasks:t,todoListID:e}}(n.data.items,t))}))}}(O))}),[f,O]);var h=n;"Active"===j&&(h=n.filter((function(t){return t.status===c.New}))),"Completed"===j&&(h=n.filter((function(t){return t.status===c.Completed})));var m=h.map((function(t){return Object(V.jsx)(q,{removeTask:r,changeTaskTitle:l,changeTaskStatus:u,todoListID:O,task:t},t.id)})),k=Object(a.useCallback)((function(){i("All",O)}),[i,O]),p=Object(a.useCallback)((function(){i("Active",O)}),[i,O]),L=Object(a.useCallback)((function(){i("Completed",O)}),[i,O]),D=Object(a.useCallback)((function(t){o(t,O)}),[o,O]),I=Object(a.useCallback)((function(t){s(t,O)}),[s,O]);return Object(V.jsxs)("div",{children:[Object(V.jsxs)("h3",{children:[Object(V.jsx)(G,{titleTdl:e,changeTitle:I}),Object(V.jsx)(b.a,{size:"small",color:"inherit",onClick:function(){d(O)},children:Object(V.jsx)(B.a,{fontSize:"medium"})})]}),Object(V.jsx)(U,{addItem:D}),Object(V.jsx)("ul",{style:{listStyle:"none",paddingLeft:"0"},children:m}),Object(V.jsx)(T.a,{variant:"contained",size:"small",color:"All"===j?"primary":"secondary",onClick:k,children:"All"}),Object(V.jsx)(T.a,{variant:"contained",size:"small",color:"Active"===j?"primary":"secondary",style:{margin:"0 3px"},onClick:p,children:"Active"}),Object(V.jsx)(T.a,{variant:"contained",size:"small",color:"Completed"===j?"primary":"secondary",onClick:L,children:"Completed"})]})})),Y=function(){var t=Object(w.c)((function(t){return t.todoLists})),e=Object(w.c)((function(t){return t.tasks})),n=Object(w.b)();Object(a.useEffect)((function(){n((function(t){I().then((function(e){t({type:"SET-TODOLISTS",todoLists:e.data})}))}))}),[n]);var c=Object(a.useCallback)((function(t,e){n(function(t,e){return function(n){y(t,e).then((function(){n(function(t,e){return{type:"REMOVE-TASK",todoListID:e,taskId:t}}(e,t))}))}}(e,t))}),[n]),i=Object(a.useCallback)((function(t,e){n(function(t,e){return function(n){C(t,e).then((function(t){n({type:"ADD-TASK",task:t.data.data.item})}))}}(e,t))}),[n]),o=Object(a.useCallback)((function(t,e,c){n(F(c,t,{status:e}))}),[n]),s=Object(a.useCallback)((function(t,e,c){n(F(c,t,{title:e}))}),[n]),r=Object(a.useCallback)((function(t){n(function(t){return function(e){g(t).then((function(){e(function(t){return{type:"REMOVE-TODOLIST",todoListID:t}}(t))}))}}(t))}),[n]),l=Object(a.useCallback)((function(t){var e;n((e=t,function(t){v(e).then((function(e){t({type:"ADD-TODOLIST",todoList:e.data.data.item})}))}))}),[n]),u=Object(a.useCallback)((function(t,e){n(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",filterValue:t,todoListID:e}}(t,e))}),[n]),d=Object(a.useCallback)((function(t,e){n(function(t,e){return function(n){x(t,e).then((function(){n(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",newTitle:t,todoListID:e}}(e,t))}))}}(e,t))}),[n]),j=t.map((function(t){var n=e[t.id];return Object(V.jsx)(N.a,{item:!0,children:Object(V.jsx)(P.a,{style:{padding:"20px"},elevation:5,children:Object(V.jsx)(J,{todoListID:t.id,titleTdl:t.title,filter:t.filter,tasks:n,removeTask:c,changeTodoListFilter:u,addTask:i,changeTaskStatus:o,removeTodoList:r,changeTodoListTitle:d,changeTaskTitle:s},t.id)})},t.id)}));return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(N.a,{container:!0,style:{padding:"20px 0"},children:Object(V.jsx)(U,{addItem:l})}),Object(V.jsx)(N.a,{container:!0,spacing:5,children:j})]})};var Q=function(){return Object(V.jsxs)("div",{className:d.a.app,children:[Object(V.jsx)(j.a,{position:"static",children:Object(V.jsxs)(O.a,{style:{justifyContent:"space-between"},children:[Object(V.jsx)(b.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(V.jsx)(m.a,{})}),Object(V.jsx)(f.a,{variant:"h6",children:"TodoLists"}),Object(V.jsx)(T.a,{variant:"outlined",color:"inherit",children:"Login"})]})}),Object(V.jsx)(h.a,{fixed:!0,children:Object(V.jsx)(Y,{})})]})},W=n(43),X=n(67),Z=Object(W.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(k.a)(Object(k.a)({},t),{},Object(z.a)({},e.todoListID,t[e.todoListID].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(k.a)(Object(k.a)({},t),{},Object(z.a)({},e.task.todoListId,[e.task].concat(Object(p.a)(t[e.task.todoListId]))));case"UPDATE-TASK":return Object(k.a)(Object(k.a)({},t),{},Object(z.a)({},e.todoListID,t[e.todoListID].map((function(t){return t.id===e.taskId?Object(k.a)(Object(k.a)({},t),e.model):t}))));case"ADD-TODOLIST":return Object(k.a)(Object(k.a)({},t),{},Object(z.a)({},e.todoList.id,[]));case"REMOVE-TODOLIST":var n=Object(k.a)({},t);return delete n[e.todoListID],n;case"SET-TODOLISTS":var c=Object(k.a)({},t);return e.todoLists.forEach((function(t){return c[t.id]=[]})),c;case"SET-TASKS":return Object(k.a)(Object(k.a)({},t),{},Object(z.a)({},e.todoListID,e.tasks));default:return t}},todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todoListID}));case"ADD-TODOLIST":return[Object(k.a)(Object(k.a)({},e.todoList),{},{filter:"All"})].concat(Object(p.a)(t));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todoListID?Object(k.a)(Object(k.a)({},t),{},{filter:e.filterValue}):t}));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todoListID?Object(k.a)(Object(k.a)({},t),{},{title:e.newTitle}):t}));case"SET-TODOLISTS":return e.todoLists.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{filter:"All"})}));default:return t}}}),$=Object(W.c)(Z,Object(W.a)(X.a));window.store=$,r.a.render(Object(V.jsx)(w.a,{store:$,children:Object(V.jsx)(Q,{})}),document.getElementById("root")),l()},33:function(t,e,n){t.exports={isDone:"App_isDone__Haoe4"}},80:function(t,e,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.5e55107a.chunk.js.map